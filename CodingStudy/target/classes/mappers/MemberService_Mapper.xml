<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.mypj.myapp.persistence.MemberService_Mapper">

<insert id="memberInsert"  parameterType="HashMap">
insert into member(memberId,memberPwd,memberName,memberPhone,memberEmail,memberGender,memberBirth) 
values(#{memberId},#{memberPwd},#{memberName},#{memberPhone},#{memberEmail},#{memberGender},#{memberBirth})
</insert>

<select id="idCheck" parameterType="String" resultType="int">
select count(*) from member where memberId = #{memberId}
</select>

<select id="memberLogin" parameterType="String" resultType="mvo">
select * from member where delyn='N' and memberid= #{0} and memberpwd= #{1}
</select>

<select id="memberSelectOne" parameterType="Integer" resultType="mvo">
select * from member where delyn='N' and midx = #{midx} 
</select>

<update id="memberModify"  parameterType="HashMap">
update member set membername = #{memberName}, memberphone=#{memberPhone},
memberemail = #{memberEmail},membergender=#{memberGender},memberbirth=#{memberBirth},writeday = now() where midx =#{midx}
</update>

<update id="passwordChange" parameterType="HashMap">
update member set memberPwd=#{memberPwd} where midx = #{midx}
</update>

<update id="memberDelete" parameterType="HashMap">
update member set delyn='Y',writeday=now(), reason=#{reason} where midx = #{midx}
</update>


<select id="memberIdFind" parameterType="String" resultType="String">
select memberid from member where delyn='N' and membername = #{0} and memberemail = #{1}
</select>

<select id="memberPwdFind" parameterType="String" resultType="String">
select memberpwd from member where delyn='N' and memberid = #{0} and memberemail = #{1}
</select>




<!-- 
<delete id="stockNewsDelete">
delete from StocksNews
</delete>

<sql id="search">    
	    <if test="searchType != null and searchType.equals('stockName')">	
			and b.stockname like CONCAT('%', #{keyword}, '%')
		</if>	
		<if test="searchType != null and searchType.equals('stockNumber')">	
			 and b.stocknumber like CONCAT('%', #{keyword}, '%')
		</if> 
			<if test="searchType != null and searchType.equals('newsTitle')">	
			 and a.newstitle like CONCAT('%', #{keyword}, '%')
		</if> 
    </sql> 

<select id="stockNewsSelectAll"  parameterType="HashMap" resultType="sndto">

select DISTINCT a.newstitle, a.newscompany, a.newsdate, a.newstime,b.stocknumber,b.stockname,a.newscontentsurl 
from StocksNews a, Stocks b 
where b.sidx=a.sidx 
and a.delyn='N'

<if test="keyword!=null and keyword!=''">
<include refid="search" />
</if>
	
order by a.newsdate desc, a.newstime desc

</select>

-->
</mapper>


